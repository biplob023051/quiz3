!function(t){function e(e,s){t.ajax({data:{quiz_id:e},type:"post",url:projectBaseUrl+"quizzes/ajax_import",dataType:"json",success:function(e){if(e.result){void 0!==s?(s.attr("disabled",!0),s.closest("tr").find(".chkselect").attr("disabled",!0),s.closest("tr").find(".text-center").css({color:"#ddd"}),s.closest("tr").find(".chkselect").prop("checked",!1)):t(".chkselect:checked").each(function(){t(this).prop("checked",!1),t(this).attr("disabled",!0),t(this).closest("tr").find(".text-center").css({color:"#ddd"}),t(this).closest("tr").find(".import-quiz").attr("disabled",!0)}),t("#alert-box").html('<div class="alert alert-success"><span class="close">&times;</span>'+lang_strings.import_success+"</div>").show(),setTimeout(function(){t("#alert-box").fadeOut(3e3)},3e3);var i=e.Quiz,c="";t.each(i,function(t,e){c+='<tr class="activeQuiz">',c+='<td style="vertical-align:middle">',c+='<div style="width: 40%; float: left">',c+='<a href="'+projectBaseUrl+"quizzes/edit/"+e.id+'" class="quiz-name">'+e.name+"</a></div>",c+='<div style="width: 60%; float: left">',c+='<a href="'+projectBaseUrl+"quizzes/present/"+e.id+'">Give test!</a>',c+='<mark><a href="'+projectBaseUrl+"quizzes/table/"+e.id+'">Answers (0)</a></mark>',c+="</div>",c+="</td>",c+='<td align="right">',c+='<ul class="nav navbar-nav navbar-right no-margin">',c+='<li class="dropdown">',c+='<a href="#" data-toggle="dropdown" class="dropdown-toggle" aria-expanded="false">Actions <b class="caret"></b></a>',c+='<ul class="dropdown-menu" role="menu">',c+='<li><button type="button" class="btn btn-success btn-sm share-quiz" quiz-id="'+e.id+'" quiz-name="'+e.name+'" title="Share quiz"><i class="glyphicon glyphicon-share"></i> Share quiz</button></li>',c+='<li><button type="button" class="btn btn-danger btn-sm delete-quiz" quiz-id="'+e.id+'" title="Remove quiz"><i class="glyphicon trash"></i> Remove quiz</button></li>',c+='<li><button type="button" class="btn btn-default btn-sm active-quiz" status="1" id="'+e.id+'" title="Archive quiz"><i class="glyphicon archive"></i> Archive quiz</button></li>',c+='<li><button type="button" class="btn btn-success btn-sm duplicate-quiz" quiz-id="'+e.id+'" title="Duplicate quiz"><i class="glyphicon duplicate"></i> Duplicate quiz</button></li>',c+="</ul></li></ul></td></tr>"}),t("#demo-data").length>0?(t("#demo-data").closest(".row").remove(),t("#user-quizzes").prepend('<table class="table"><tbody id="quiz-list">'+c+"</tbody></table")):t("#quiz-list").append(c)}else t("#alert-box").html('<div class="alert alert-danger"><span class="close">&times;</span>'+e.message+"</div>").show(),setTimeout(function(){t("#alert-box").fadeOut(3e3)},2e3)}})}function s(){i=[],c=[],t(".subjects input").each(function(){this.checked&&i.push(t(this).val())}),t(".classes input").each(function(){this.checked&&c.push(t(this).val())}),t.ajax({data:{subject_list:i,class_list:c},type:"post",url:projectBaseUrl+"quizzes/test_link",dataType:"html",success:function(e){t("#pagination_content").html(e)}})}var i=[],c=[];t(document).on("click","#show-settings",function(){t(".caret-down").toggle(),t(".caret-right").toggle(),t(".settings-options").toggle()}),t(document).on("change","#subjects-0",function(){t(".subjects").find("input").prop("checked",t(this).prop("checked"))}),t(document).on("change",".subjects input",function(){0==t(this).prop("checked")&&t("#subjects-0").prop("checked",!1),t(".subjects input:checked").length==t(".subjects input").length-1&&t("#subjects-0").prop("checked",!0),s()}),t(document).on("change","#classes-0",function(){t(".classes").find("input").prop("checked",t(this).prop("checked"))}),t(document).on("change",".classes input",function(){0==t(this).prop("checked")&&t("#classes-0").prop("checked",!1),t(".classes input:checked").length==t(".classes input").length-1&&t("#classes-0").prop("checked",!0),s()}),t(document).on("change","#selectAll",function(){t(".chkselect").prop("checked",t(this).prop("checked"))}),t(document).on("change",".chkselect",function(){0==t(this).prop("checked")&&t("#selectAll").prop("checked",!1),t(".chkselect:checked").length==t(".chkselect").length&&t("#selectAll").prop("checked",!0)}),t(document).on("click",".pagination a",function(e){if(e.preventDefault(),t(this).parent().hasClass("disabled")||t(this).parent().hasClass("active"))return!1;var s=t(this).attr("href").split("page=");t.ajax({data:{page_no:s[1],subject_list:i,class_list:c},type:"post",url:projectBaseUrl+"quizzes/test_link",dataType:"html",success:function(e){t("#pagination_content").html(e)}})}),t(document).on("click","#name-sort a, #created-sort a",function(e){e.preventDefault();var s=t(this).attr("data-rel");if("name-sort"==t(this).parent().attr("id"))a="name";if("created-sort"==t(this).parent().attr("id"))var a="created";t.ajax({data:{order_type:s,order_field:a,page_no:1,subject_list:i,class_list:c},type:"post",url:projectBaseUrl+"quizzes/test_link",dataType:"html",success:function(e){t("#pagination_content").html(e)}})}),t(document).on("click",".view-quiz",function(){var e=t(this).attr("quiz-id");t.ajax({data:{quiz_id:e},type:"post",url:projectBaseUrl+"quizzes/ajax_preview",dataType:"html",success:function(e){t("#preview-quiz").html(e).modal("show")}})}),t(document).on("click",".import-quiz",function(s){s.preventDefault(),e(t(this).attr("quiz-id"),t(this))}),t(document).on("click",".close",function(e){t(this).parent().parent().hide()}),t(document).on("click",".multiple-import-quiz",function(s){var i=[];if(t(".chkselect:checked").each(function(){i.push(t(this).attr("data-id"))}),i.length<1)return t("#alert-box").html('<div class="alert alert-danger"><span class="close">&times;</span>'+lang_strings.check_select+"</div>").show(),setTimeout(function(){t("#alert-box").fadeOut(3e3)},3e3),!1;e(i)})}(jQuery);