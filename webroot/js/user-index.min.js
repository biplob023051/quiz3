!function(t){function e(e){var s=e.attr("data-rel"),i=e.val();if(""==i)return!1;var c=!1;e.hasClass("make-inactive")&&(c=!0,i=e.is(":checked")?1:null);var o=e.find("option:selected").text();t.ajax({async:!1,dataType:"json",url:projectBaseUrl+"admin/users/ajax_update",type:"post",data:{user_info:s,value_info:i},success:function(s){if(s.success||"true"===s.success)if(t.notify({icon:"glyphicon glyphicon-saved",title:lang_strings.success,message:s.message},{type:"success",delay:2e3}),c)n=!0,null==i?e.closest("tr").addClass("inactive-row"):e.closest("tr").removeClass("inactive-row");else{e.hide();var l=o||i;e.prev().html(l+' <i class="glyphicon pencil-small"></i>').show(),e.attr("data-value",i),o&&(a=!0)}else e.attr("data-value",e.attr("data-value")),t.notify({icon:"glyphicon glyphicon-ban-circle",title:lang_strings.failed,message:s.message},{type:"danger",delay:2e3})}})}t("#maintenance-alert").css({width:t(window).width()}),t(document).on("click",".user-info",function(){t(".update-user").each(function(){t(this).hide(),t(this).prev().show()}),t(this).hide(),t(this).next().show();var e=t(this);setTimeout(function(){e.next().hide(),e.show()},15e3)});var s,a;t(document).on("change","select.change-level",function(){s=t(this),t("#change-role").modal("show")}),t(document).on("click","#confirm-role",function(a){a.preventDefault(),t(this).attr("disabled",!0),e(s),t("#change-role").modal("hide")}),t("#change-role").on("hidden.bs.modal",function(){t("#confirm-role").attr("disabled",!1),t(".update-user").each(function(){t(this).hide(),t(this).prev().show()}),a||s.val(s.attr("data-value")),s="",a=""}),t("input.update-user").blur(function(){e(t(this))}),t("input.update-user").keypress(function(e){13==e.which&&t(this).blur()});var n;t(document).on("change",".make-inactive",function(){s=t(this),t(this).is(":checked")?t("#status-body").text(lang_strings.status_active_body):t("#status-body").text(lang_strings.status_inactive_body),t("#change-status").modal("show")}),t(document).on("click","#confirm-status",function(a){a.preventDefault(),t("#confirm-status").attr("disabled",!0),e(s),t("#change-status").modal("hide")}),t("#change-status").on("hidden.bs.modal",function(){t("#confirm-status").attr("disabled",!1),n||s.prop("checked",!!s.attr("data-value")),s="",n=""}),t(document).on("change",".on-select",function(){t(this).closest("form").submit()})}(jQuery);